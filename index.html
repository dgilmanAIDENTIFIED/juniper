
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome to juniper’s documentation! &#8212; juniper  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. Quickstart" href="quickstart.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-juniper-s-documentation">
<h1>Welcome to juniper’s documentation!<a class="headerlink" href="#welcome-to-juniper-s-documentation" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://circleci.com/gh/eabglobal/juniper/tree/master"><img alt="circle" src="https://circleci.com/gh/eabglobal/juniper/tree/master.svg?style=shield" /></a> <a class="reference external" href="https://pypi.org/project/juniper/"><img alt="pypi version" src="https://img.shields.io/pypi/v/juniper.svg" /></a> <a class="reference external" href="https://github.com/eabglobal/juniper/blob/master/LICENSE"><img alt="apache license" src="https://img.shields.io/github/license/eabglobal/juniper.svg" /></a></p>
<p>Welcome to Juniper’s documentation. Get started with <a class="reference internal" href="quickstart.html"><span class="doc">Quickstart</span></a>. There is also a
more detailed <a class="reference internal" href="tutorial.html"><span class="doc">Tutorial</span></a> that shows how to package a set of lambda
functions using juniper. Common patterns are described in the <a class="reference internal" href="concepts.html"><span class="doc">Concepts</span></a>
section.</p>
<div class="section" id="packaging">
<h2>Packaging λ<a class="headerlink" href="#packaging" title="Permalink to this headline">¶</a></h2>
<p>Packaging of <strong>python</strong> lambda functions is a problem a web developer faces when
building web APIs using AWS services. The main issue is that the dependencies
of the function must be included along with the business logic of the function.</p>
<p>Creating the .zip artifacts manually is not a very complicated process, the steps
are clearly defined in the <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-python-how-to-create-deployment-package.html">AWS Documentation</a>. However, when building real
world serverless applications with lambda, this process is not very scalable.
Instead of building custom bash scripts to automate the build process, use juniper!</p>
</div>
<div class="section" id="what-is-juniper">
<h2>What is Juniper?<a class="headerlink" href="#what-is-juniper" title="Permalink to this headline">¶</a></h2>
<p>Juniper is a packaging tool with a single purpose in mind: standardize the creation
of a zip artifact for a set of AWS Lambda functions.</p>
<p>To package a lambda function you must create a manifest file. This file tells juniper
what to include in the artifact. The definition of a single function looks like this:</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">functions</span><span class="p">:</span>
  <span class="c1"># Name of your lambda function</span>
  <span class="n">processor</span><span class="p">:</span>
    <span class="n">requirements</span><span class="p">:</span> <span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">processor</span><span class="o">/</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
    <span class="n">include</span><span class="p">:</span>
    <span class="c1"># List of modules to include in the zip file.</span>
    <span class="o">-</span> <span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">commonlib</span>
    <span class="o">-</span> <span class="o">./</span><span class="n">src</span><span class="o">/</span><span class="n">processor</span>
</pre></div>
</div>
<p>With a manifest file like the one above, use the juniper cli to generate
the zip files for your functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">juni</span> <span class="n">build</span>
</pre></div>
</div>
<p>Out of the box juniper will look for a definitions file called <strong>manifest.yml</strong>
and it will place the generated zip files in a <strong>./dist</strong> directory. These are
configurable parameters, to learn more read the <a class="reference internal" href="features.html"><span class="doc">Features</span></a> section.</p>
<p>In this example, juni will create a <cite>./dist/processor.zip</cite> with the dependencies defined in the
requirements file and the contents of the ./src/commonlib and the ./src/processor.</p>
</div>
<div class="section" id="with-sam">
<h2>With SAM<a class="headerlink" href="#with-sam" title="Permalink to this headline">¶</a></h2>
<p>If you are working with lambda functions, chances are that you are using a <a class="reference external" href="https://github.com/awslabs/serverless-application-model">SAM</a>
template as a way to define your AWS serverless resources. The definition of
a SAM template for a python lambda function looks like this:</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Transform</span><span class="p">:</span> <span class="s1">&#39;AWS::Serverless-2016-10-31&#39;</span>
<span class="n">Resources</span><span class="p">:</span>

<span class="n">ProcessorFn</span><span class="p">:</span>
  <span class="c1"># This resource creates a Lambda function.</span>
  <span class="n">Type</span><span class="p">:</span> <span class="s1">&#39;AWS::Serverless::Function&#39;</span>

  <span class="n">Properties</span><span class="p">:</span>
      <span class="c1"># The location of the Lambda function code.</span>
      <span class="n">CodeUri</span><span class="p">:</span> <span class="o">./</span><span class="n">dist</span><span class="o">/</span><span class="n">processor</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
<p>Juniper is responsible for building the artifact for your lambda function based on
the parameters you specify in the manifest file. You can use the generated file
however you wish to. If you choose to use SAM to define your resources, a basic
development/deployment workflow would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">juni</span> <span class="n">build</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sam</span> <span class="n">build</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sam</span> <span class="n">deploy</span>
</pre></div>
</div>
<p>Using juni with sam is highly recommended. Keep in mind that you can use the
generated artifact to manually update a lambda function from the AWS console.
Or you can also use the AWS cli to update a lambda function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aws</span> <span class="k">lambda</span> <span class="n">update</span><span class="o">-</span><span class="n">function</span><span class="o">-</span><span class="n">code</span> <span class="o">--</span><span class="n">function</span><span class="o">-</span><span class="n">name</span> <span class="n">ProcessorFn</span> <span class="o">--</span><span class="nb">zip</span><span class="o">-</span><span class="n">file</span> <span class="o">./</span><span class="n">dist</span><span class="o">/</span><span class="n">processor</span><span class="o">.</span><span class="n">zip</span>
</pre></div>
</div>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>Using the available tools in the serverless space, we found there was no tool
capable of fulfilling all of these business needs:</p>
<ul class="simple">
<li>Minimal manifest file to define packaging</li>
<li>Using docker containers as a way to install dependencies and generate the artifacts</li>
<li>Specify dependencies per lambda (one requirements.txt file per function)</li>
<li>Create a zip artifact per lambda</li>
<li>Ability to include shared dependencies (python modules relative to the function
being packaged)</li>
</ul>
<p>This list defines the entire scope of Juniper.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Keep in mind that Juniper is a packaging tool only! Most of the tools surveyed
offer a more comprehensive set of features one of which is packaging.</p>
</div>
</div>
</div>
<div class="section" id="contents">
<h1>Contents:<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">1. Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#dependencies">1.1. Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">1.2. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#package-lambdas">1.3. Package Lambdas</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#so-what-did-just-happen">1.4. So what did just happen?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">2. Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#map-reduce-pipeline">2.1. Map Reduce Pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">3. Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#packaging">3.1. Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#manifest-yml">3.2. manifest.yml</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#juni-build">3.3. juni build</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html#lambda-build-tool">4. Lambda Build Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html#microservices">5. Microservices</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html#tool-survey">6. Tool Survey</a><ul>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#serverless-application-model-sam">6.1. Serverless Application Model (SAM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#chalice">6.2. Chalice</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#serverless-framework">6.3. Serverless Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="concepts.html#zappa">6.4. Zappa</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">7. Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="features.html#custom-docker-image">7.1. Custom Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#recommended-docker-images">7.2. Recommended docker images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">8. Layers and binaries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#tl-dr">8.1. TL;DR</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#sample-project">8.2. Sample Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#installing-os-libraries">8.3. Installing OS libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#lambda-lib-directory">8.4. lambda_lib directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#docker-build">8.5. docker build</a></li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">juniper</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">1. Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">2. Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">3. Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html#lambda-build-tool">4. Lambda Build Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html#microservices">5. Microservices</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html#tool-survey">6. Tool Survey</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">7. Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">8. Layers and binaries</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="quickstart.html" title="next chapter">1. Quickstart</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, EAB Tech Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>